!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}},o=this&&this.__await||function(t){return this instanceof o?(this.v=t,this):new o(t)},i=this&&this.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){i[t]&&(n[t]=function(e){return new Promise(function(r,n){s.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{!function(t){t.value instanceof o?Promise.resolve(t.value.v).then(c,h):l(s[0][2],t)}(i[t](e))}catch(t){l(s[0][3],t)}}function c(t){u("next",t)}function h(t){u("throw",t)}function l(t,e){t(e),s.shift(),s.length&&u(s[0][0],s[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),r(1);const s=new Map([["b","black"],["e","brown"],["r","red"],["o","orange"],["y","yellow"],["g","green"],["l","blue"],["v","violet"],["a","grey"],["w","white"],["z","gold"],["x","silver"]]);new class{constructor(t){this.container=t,window.addEventListener("keypress",t=>{if(this.keyHandler&&!this.keyHandler(t.key))return t.preventDefault(),!1},!0);const e=document.createElement("section");e.className="stats",this.container.appendChild(e),this.stats=e;const r=document.createElement("section");r.className="colorbar",this.container.appendChild(r),this.colorBar=r,this.container.appendChild(this.generateLegend())}async run(){var t,e;try{for(var r,o=n(this.images());!(r=await o.next()).done;){const t=r.value,e=await this.fetchStats();this.stats.textContent=JSON.stringify(e);const n=await this.prompt(t);!1===n?await this.skip(t):await this.submit(t,n)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&await e.call(o)}finally{if(t)throw t.error}}}generateLegend(){const t=document.createElement("section");t.className="legend";const e=document.createElement("h3");e.textContent="Key codes",t.appendChild(e);const r=document.createElement("ul");t.appendChild(r);for(const[t,e]of s){const n=document.createElement("li"),o=document.createElement("b");o.textContent=`"${t}"`;const i=document.createElement("span");i.textContent=` - ${e}`,n.appendChild(o),n.appendChild(i),r.appendChild(n)}return t}async prompt(t){const e=await this.loadImage(t);this.image&&this.container.removeChild(this.image),this.container.insertBefore(e,this.colorBar),this.image=e,this.colorBar.innerHTML="";const r=[],n=[],o=t=>{const e=document.createElement("span");e.textContent=t,e.className=t,this.colorBar.appendChild(e),r.push(t),n.push(e)};return new Promise(t=>{this.keyHandler=(e=>{if(s.has(e))o(s.get(e));else if("Backspace"===e)(()=>{const t=n.pop();t&&t.remove(),r.pop()})();else if("Enter"===e)this.keyHandler=void 0,t(r);else{if("Escape"!==e)return!0;t(!1)}return!1})})}async fetchStats(){const t=await fetch("/api/stats");return await t.json()}images(){return i(this,arguments,function*(){for(;;){const t=yield o(fetch("/api/next")),e=yield o(t.json());if(e.done)return yield o(void 0);yield yield o(e.hash)}})}async loadImage(t){const e=await new Promise((e,r)=>{const n=document.createElement("img");n.onload=(()=>e(n)),n.onerror=(()=>r(new Error("Failed to load image"))),n.src=`/images/${t}.jpg`}),r=256/Math.max(e.width,e.height);return e.width*=r,e.height*=r,e}async skip(t){const e=await fetch(`/api/label/${t}`,{method:"DELETE"});return await e.json()}async submit(t,e){await fetch(`/api/label/${t}`,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({colors:e})})}}(document.getElementById("content")).run().catch(t=>{console.error(t)})},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];this.map[t]=r?r+","+e:e},h.prototype.delete=function(t){delete this.map[a(t)]},h.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},h.prototype.set=function(t,e){this.map[a(t)]=u(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},p.call(m.prototype),p.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];w.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=m,t.Response=w,t.fetch=function(t,r){return new Promise(function(n,o){var i=new m(t,r),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new h;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;n(new w(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function d(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var r=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=function(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function w(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzaWZ5LWZyb250ZW5kLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJLRVlfVE9fQ09MT1JfTUFQIiwiTWFwIiwiW29iamVjdCBPYmplY3RdIiwiY29udGFpbmVyIiwidGhpcyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5SGFuZGxlciIsInByZXZlbnREZWZhdWx0Iiwic3RhdHMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNvbG9yQmFyIiwiZ2VuZXJhdGVMZWdlbmQiLCJfYyIsIl9iIiwiX19hc3luY1ZhbHVlcyIsImltYWdlcyIsIm5leHQiLCJkb25lIiwiaW1hZ2UiLCJmZXRjaFN0YXRzIiwidGV4dENvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwicHJvbXB0Iiwic2tpcCIsInN1Ym1pdCIsInJlcyIsImhlYWRlciIsInVsIiwibGkiLCJrZXlXcmFwIiwidmFsdWVXcmFwIiwiaGFzaCIsImxvYWRJbWFnZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiaW5uZXJIVE1MIiwiY29sb3JzIiwiZWxlbXMiLCJhZGRDb2xvciIsImNvbG9yIiwiZWxlbSIsInB1c2giLCJQcm9taXNlIiwicmVzb2x2ZSIsImhhcyIsInBvcCIsInJlbW92ZSIsInBvcENvbG9yIiwidW5kZWZpbmVkIiwiZmV0Y2giLCJqc29uIiwiX19hd2FpdCIsImltZyIsInJlamVjdCIsIm9ubG9hZCIsIm9uZXJyb3IiLCJFcnJvciIsInNyYyIsInNjYWxlIiwiTWF0aCIsIm1heCIsIndpZHRoIiwiaGVpZ2h0IiwibWV0aG9kIiwiaGVhZGVycyIsImNvbnRlbnQtdHlwZSIsImJvZHkiLCJnZXRFbGVtZW50QnlJZCIsInJ1biIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsInN1cHBvcnQiLCJzZWFyY2hQYXJhbXMiLCJpdGVyYWJsZSIsImJsb2IiLCJCbG9iIiwiZm9ybURhdGEiLCJhcnJheUJ1ZmZlciIsInZpZXdDbGFzc2VzIiwiaXNEYXRhVmlldyIsIm9iaiIsIkRhdGFWaWV3IiwiaXNQcm90b3R5cGVPZiIsImlzQXJyYXlCdWZmZXJWaWV3IiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJpbmRleE9mIiwidG9TdHJpbmciLCJIZWFkZXJzIiwiYXBwZW5kIiwibm9ybWFsaXplTmFtZSIsIm5vcm1hbGl6ZVZhbHVlIiwib2xkVmFsdWUiLCJtYXAiLCJzZXQiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwia2V5cyIsIml0ZW1zIiwiaXRlcmF0b3JGb3IiLCJ2YWx1ZXMiLCJlbnRyaWVzIiwiaXRlcmF0b3IiLCJtZXRob2RzIiwiUmVxdWVzdCIsImNsb25lIiwiX2JvZHlJbml0IiwiQm9keSIsIlJlc3BvbnNlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInVybCIsInJlc3BvbnNlIiwidHlwZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJyZWRpcmVjdCIsIlJhbmdlRXJyb3IiLCJsb2NhdGlvbiIsImlucHV0IiwiaW5pdCIsInJlcXVlc3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wdGlvbnMiLCJyYXdIZWFkZXJzIiwicmVwbGFjZSIsInNwbGl0IiwibGluZSIsInBhcnRzIiwic2hpZnQiLCJ0cmltIiwiam9pbiIsInBhcnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VUZXh0IiwiVHlwZUVycm9yIiwib250aW1lb3V0Iiwib3BlbiIsImNyZWRlbnRpYWxzIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJwb2x5ZmlsbCIsIlN0cmluZyIsInRlc3QiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25zdW1lZCIsImJvZHlVc2VkIiwiZmlsZVJlYWRlclJlYWR5IiwicmVhZGVyIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiRmlsZVJlYWRlciIsInByb21pc2UiLCJyZWFkQXNBcnJheUJ1ZmZlciIsImJ1ZmZlckNsb25lIiwiYnVmIiwic2xpY2UiLCJ2aWV3IiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJidWZmZXIiLCJfaW5pdEJvZHkiLCJfYm9keVRleHQiLCJfYm9keUJsb2IiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJfYm9keUFycmF5QnVmZmVyIiwicmVqZWN0ZWQiLCJ0aGVuIiwidGV4dCIsInJlYWRBc1RleHQiLCJyZWFkQmxvYkFzVGV4dCIsImNoYXJzIiwibGVuZ3RoIiwiZnJvbUNoYXJDb2RlIiwicmVhZEFycmF5QnVmZmVyQXNUZXh0IiwiZGVjb2RlIiwicGFyc2UiLCJ1cGNhc2VkIiwidG9VcHBlckNhc2UiLCJub3JtYWxpemVNZXRob2QiLCJyZWZlcnJlciIsImZvcm0iLCJieXRlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsImJvZHlJbml0Iiwib2siXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtB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WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgJ3doYXR3Zy1mZXRjaCdcblxuaW50ZXJmYWNlIElTdGF0cyB7XG4gIHJlYWRvbmx5IGNvbXBsZXRlOiBudW1iZXI7XG4gIHJlYWRvbmx5IHRvdGFsOiBudW1iZXI7XG59XG5cbnR5cGUgUHJvbXB0UmVzdWx0ID0gZmFsc2UgfCBSZWFkb25seUFycmF5PHN0cmluZz47XG5cbmNvbnN0IEtFWV9UT19DT0xPUl9NQVAgPSBuZXcgTWFwKFtcbiAgWyAnYicsICdibGFjaycgXSxcbiAgWyAnZScsICdicm93bicgXSxcbiAgWyAncicsICdyZWQnIF0sXG4gIFsgJ28nLCAnb3JhbmdlJyBdLFxuICBbICd5JywgJ3llbGxvdycgXSxcbiAgWyAnZycsICdncmVlbicgXSxcbiAgWyAnbCcsICdibHVlJyBdLFxuICBbICd2JywgJ3Zpb2xldCcgXSxcbiAgWyAnYScsICdncmV5JyBdLFxuICBbICd3JywgJ3doaXRlJyBdLFxuICBbICd6JywgJ2dvbGQnIF0sXG4gIFsgJ3gnLCAnc2lsdmVyJyBdLFxuXSk7XG5cbmNsYXNzIEFwcCB7XG4gIHByaXZhdGUgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgY29sb3JCYXI6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHN0YXRzOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBrZXlIYW5kbGVyOiAoKGtleTogc3RyaW5nKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMua2V5SGFuZGxlciAmJiAhdGhpcy5rZXlIYW5kbGVyKGUua2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxuICAgIC8vIFN0YXRzXG4gICAgY29uc3Qgc3RhdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gICAgc3RhdHMuY2xhc3NOYW1lID0gJ3N0YXRzJztcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRzKTtcbiAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG5cbiAgICAvLyBDb2xvcnNcbiAgICBjb25zdCBjb2xvckJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICBjb2xvckJhci5jbGFzc05hbWUgPSAnY29sb3JiYXInO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29sb3JCYXIpO1xuICAgIHRoaXMuY29sb3JCYXIgPSBjb2xvckJhcjtcblxuICAgIC8vIExlZ2VuZFxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVMZWdlbmQoKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcnVuKCkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgaW1hZ2Ugb2YgdGhpcy5pbWFnZXMoKSkge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmZldGNoU3RhdHMoKTtcblxuICAgICAgdGhpcy5zdGF0cy50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN0YXRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcm9tcHQoaW1hZ2UpO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNraXAoaW1hZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXQoaW1hZ2UsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUxlZ2VuZCgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgcmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgIHJlcy5jbGFzc05hbWUgPSAnbGVnZW5kJztcblxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ0tleSBjb2Rlcyc7XG4gICAgcmVzLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgcmVzLmFwcGVuZENoaWxkKHVsKTtcblxuICAgIGZvciAoY29uc3QgWyBrZXksIHZhbHVlIF0gb2YgS0VZX1RPX0NPTE9SX01BUCkge1xuICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gICAgICBjb25zdCBrZXlXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAga2V5V3JhcC50ZXh0Q29udGVudCA9IGBcIiR7a2V5fVwiYDtcblxuICAgICAgY29uc3QgdmFsdWVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgdmFsdWVXcmFwLnRleHRDb250ZW50ID0gYCAtICR7dmFsdWV9YDtcblxuICAgICAgbGkuYXBwZW5kQ2hpbGQoa2V5V3JhcCk7XG4gICAgICBsaS5hcHBlbmRDaGlsZCh2YWx1ZVdyYXApO1xuXG4gICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvbXB0KGhhc2g6IHN0cmluZyk6IFByb21pc2U8UHJvbXB0UmVzdWx0PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBhd2FpdCB0aGlzLmxvYWRJbWFnZShoYXNoKTtcblxuICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmltYWdlKTtcbiAgICB9XG4gICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKGltYWdlLCB0aGlzLmNvbG9yQmFyKTtcbiAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG5cbiAgICB0aGlzLmNvbG9yQmFyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgY29uc3QgY29sb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGVsZW1zOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgICBjb25zdCBhZGRDb2xvciA9IChjb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZWxlbS50ZXh0Q29udGVudCA9IGNvbG9yO1xuICAgICAgZWxlbS5jbGFzc05hbWUgPSBjb2xvcjtcblxuICAgICAgdGhpcy5jb2xvckJhci5hcHBlbmRDaGlsZChlbGVtKTtcblxuICAgICAgY29sb3JzLnB1c2goY29sb3IpO1xuICAgICAgZWxlbXMucHVzaChlbGVtKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcG9wQ29sb3IgPSAoKSA9PiB7XG4gICAgICBjb25zdCBlbGVtID0gZWxlbXMucG9wKCk7XG4gICAgICBpZiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgY29sb3JzLnBvcCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8UHJvbXB0UmVzdWx0PigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5rZXlIYW5kbGVyID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChLRVlfVE9fQ09MT1JfTUFQLmhhcyhrZXkpKSB7XG4gICAgICAgICAgYWRkQ29sb3IoS0VZX1RPX0NPTE9SX01BUC5nZXQoa2V5KSEpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0JhY2tzcGFjZScpIHtcbiAgICAgICAgICBwb3BDb2xvcigpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgIC8vIFN1Ym1pdFxuICAgICAgICAgIHRoaXMua2V5SGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXNvbHZlKGNvbG9ycyk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgIC8vIFNraXBcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmZXRjaFN0YXRzKCk6IFByb21pc2U8SVN0YXRzPiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9hcGkvc3RhdHMnKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzLmpzb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgKmltYWdlcygpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL2FwaS9uZXh0Jyk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChqc29uLmRvbmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB5aWVsZCBqc29uLmhhc2g7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkSW1hZ2UoaGFzaDogc3RyaW5nKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiB7XG4gICAgY29uc3QgaW1nID0gYXdhaXQgbmV3IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykgYXMgSFRNTEltYWdlRWxlbWVudDtcblxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgaW1hZ2UnKSk7XG5cbiAgICAgIGltZy5zcmMgPSBgL2ltYWdlcy8ke2hhc2h9LmpwZ2A7XG4gICAgfSk7XG5cbiAgICAvLyBEb3duc2NhbGVcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heChpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xuICAgIGNvbnN0IHNjYWxlID0gMjU2IC8gbWF4O1xuXG4gICAgaW1nLndpZHRoICo9IHNjYWxlO1xuICAgIGltZy5oZWlnaHQgKj0gc2NhbGU7XG5cbiAgICByZXR1cm4gaW1nO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBza2lwKGhhc2g6IHN0cmluZykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL2xhYmVsLyR7aGFzaH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7XG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdChoYXNoOiBzdHJpbmcsIGNvbG9yczogUmVhZG9ubHlBcnJheTxzdHJpbmc+KSB7XG4gICAgYXdhaXQgZmV0Y2goYC9hcGkvbGFiZWwvJHtoYXNofWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb2xvcnMgfSksXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgYXBwID0gbmV3IEFwcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpISk7XG5cbmFwcC5ydW4oKS5jYXRjaCgoZSkgPT4ge1xuICBjb25zb2xlLmVycm9yKGUpO1xufSk7XG4iLCIoZnVuY3Rpb24oc2VsZikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKHNlbGYuZmV0Y2gpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBzdXBwb3J0ID0ge1xuICAgIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gc2VsZixcbiAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcbiAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfVxuXG4gIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyKSB7XG4gICAgdmFyIHZpZXdDbGFzc2VzID0gW1xuICAgICAgJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nXG4gICAgXVxuXG4gICAgdmFyIGlzRGF0YVZpZXcgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob2JqKVxuICAgIH1cblxuICAgIHZhciBpc0FycmF5QnVmZmVyVmlldyA9IEFycmF5QnVmZmVyLmlzVmlldyB8fCBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG4gICAgfVxuICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcbiAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9XG5cbiAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKVxuICAgICAgfSwgdGhpcylcbiAgICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcbiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgICAgfSwgdGhpcylcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXVxuICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSsnLCcrdmFsdWUgOiB2YWx1ZVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHRoaXMuaGFzKG5hbWUpID8gdGhpcy5tYXBbbmFtZV0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChuYW1lKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW1zLnB1c2godmFsdWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICAgIH1cbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpXG4gICAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGFyc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodmlld1tpXSlcbiAgICB9XG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG4gIH1cblxuICBmdW5jdGlvbiBidWZmZXJDbG9uZShidWYpIHtcbiAgICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgICByZXR1cm4gYnVmLnNsaWNlKDApXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpXG4gICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWYpKVxuICAgICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gQm9keSgpIHtcbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgc3VwcG9ydC5ibG9iICYmIGlzRGF0YVZpZXcoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keS5idWZmZXIpXG4gICAgICAgIC8vIElFIDEwLTExIGNhbid0IGhhbmRsZSBhIERhdGFWaWV3IGJvZHkuXG4gICAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnN1bWVkKHRoaXMpIHx8IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZWFkQXJyYXlCdWZmZXJBc1RleHQodGhpcy5fYm9keUFycmF5QnVmZmVyKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gU3RyaW5nKGlucHV0KVxuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG4gICAgfVxuICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7IGJvZHk6IHRoaXMuX2JvZHlJbml0IH0pXG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcbiAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgIGlmIChieXRlcykge1xuICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gICAgLy8gUmVwbGFjZSBpbnN0YW5jZXMgb2YgXFxyXFxuIGFuZCBcXG4gZm9sbG93ZWQgYnkgYXQgbGVhc3Qgb25lIHNwYWNlIG9yIGhvcml6b250YWwgdGFiIHdpdGggYSBzcGFjZVxuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4yXG4gICAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJylcbiAgICBwcmVQcm9jZXNzZWRIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKVxuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gaGVhZGVyc1xuICB9XG5cbiAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzID09PSB1bmRlZmluZWQgPyAyMDAgOiBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSydcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICB9XG5cbiAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuICB9XG5cbiAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXG4gIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnb21pdCcpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgIH0pXG4gIH1cbiAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=
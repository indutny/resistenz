!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}},o=this&&this.__await||function(t){return this instanceof o?(this.v=t,this):new o(t)},i=this&&this.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){i[t]&&(n[t]=function(e){return new Promise(function(r,n){s.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{!function(t){t.value instanceof o?Promise.resolve(t.value.v).then(c,h):l(s[0][2],t)}(i[t](e))}catch(t){l(s[0][3],t)}}function c(t){u("next",t)}function h(t){u("throw",t)}function l(t,e){t(e),s.shift(),s.length&&u(s[0][0],s[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),r(1);const s=new Map([["b","black"],["e","brown"],["r","red"],["o","orange"],["y","yellow"],["g","green"],["l","blue"],["v","violet"],["a","grey"],["w","white"],["z","gold"],["x","silver"],[" ","none"]]);new class{constructor(t){this.container=t,window.addEventListener("keypress",t=>{if(this.keyHandler&&!this.keyHandler(t.key))return t.preventDefault(),!1},!0);const e=document.createElement("section");e.className="stats",this.container.appendChild(e),this.stats=e;const r=document.createElement("section");r.className="colorbar",this.container.appendChild(r),this.colorBar=r,this.container.appendChild(this.generateLegend())}async run(){var t,e;try{for(var r,o=n(this.images());!(r=await o.next()).done;){const t=r.value,e=await this.fetchStats();this.stats.textContent=JSON.stringify(e);const n=await this.prompt(t);!1===n?await this.skip(t):await this.submit(t,n)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&await e.call(o)}finally{if(t)throw t.error}}}generateLegend(){const t=document.createElement("section");t.className="legend";const e=document.createElement("h3");e.textContent="Key codes",t.appendChild(e);const r=document.createElement("ul");t.appendChild(r);for(const[t,e]of s){const n=document.createElement("li"),o=document.createElement("b");o.textContent=`"${t}"`;const i=document.createElement("span");i.textContent=` - ${e}`,n.appendChild(o),n.appendChild(i),r.appendChild(n)}return t}async prompt(t){const e=await this.loadImage(t);this.image&&this.container.removeChild(this.image),this.container.insertBefore(e,this.colorBar),this.image=e,this.colorBar.innerHTML="";const r=[],n=[],o=t=>{const e=document.createElement("span");e.textContent=t,e.className=t,this.colorBar.appendChild(e),r.push(t),n.push(e)};return new Promise(t=>{this.keyHandler=(e=>{if(s.has(e))o(s.get(e));else if("Backspace"===e)(()=>{const t=n.pop();t&&t.remove(),r.pop()})();else if("Enter"===e)this.keyHandler=void 0,t(r);else{if("Escape"!==e)return!0;t(!1)}return!1})})}async fetchStats(){const t=await fetch("/api/stats");return await t.json()}images(){return i(this,arguments,function*(){for(;;){const t=yield o(fetch("/api/next")),e=yield o(t.json());if(e.done)return yield o(void 0);yield yield o(e.hash)}})}async loadImage(t){const e=await new Promise((e,r)=>{const n=document.createElement("img");n.onload=(()=>e(n)),n.onerror=(()=>r(new Error("Failed to load image"))),n.src=`/images/${t}.jpg`}),r=256/Math.max(e.width,e.height);return e.width*=r,e.height*=r,e}async skip(t){const e=await fetch(`/api/label/${t}`,{method:"DELETE"});return await e.json()}async submit(t,e){await fetch(`/api/label/${t}`,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({colors:e})})}}(document.getElementById("content")).run().catch(t=>{console.error(t)})},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];this.map[t]=r?r+","+e:e},h.prototype.delete=function(t){delete this.map[a(t)]},h.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},h.prototype.set=function(t,e){this.map[a(t)]=u(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},p.call(m.prototype),p.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];w.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=m,t.Response=w,t.fetch=function(t,r){return new Promise(function(n,o){var i=new m(t,r),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new h;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;n(new w(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function d(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var r=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=function(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function w(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzaWZ5LWZyb250ZW5kLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJLRVlfVE9fQ09MT1JfTUFQIiwiTWFwIiwiW29iamVjdCBPYmplY3RdIiwiY29udGFpbmVyIiwidGhpcyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5SGFuZGxlciIsInByZXZlbnREZWZhdWx0Iiwic3RhdHMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNvbG9yQmFyIiwiZ2VuZXJhdGVMZWdlbmQiLCJfYyIsIl9iIiwiX19hc3luY1ZhbHVlcyIsImltYWdlcyIsIm5leHQiLCJkb25lIiwiaW1hZ2UiLCJmZXRjaFN0YXRzIiwidGV4dENvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwicHJvbXB0Iiwic2tpcCIsInN1Ym1pdCIsInJlcyIsImhlYWRlciIsInVsIiwibGkiLCJrZXlXcmFwIiwidmFsdWVXcmFwIiwiaGFzaCIsImxvYWRJbWFnZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiaW5uZXJIVE1MIiwiY29sb3JzIiwiZWxlbXMiLCJhZGRDb2xvciIsImNvbG9yIiwiZWxlbSIsInB1c2giLCJQcm9taXNlIiwicmVzb2x2ZSIsImhhcyIsInBvcCIsInJlbW92ZSIsInBvcENvbG9yIiwidW5kZWZpbmVkIiwiZmV0Y2giLCJqc29uIiwiX19hd2FpdCIsImltZyIsInJlamVjdCIsIm9ubG9hZCIsIm9uZXJyb3IiLCJFcnJvciIsInNyYyIsInNjYWxlIiwiTWF0aCIsIm1heCIsIndpZHRoIiwiaGVpZ2h0IiwibWV0aG9kIiwiaGVhZGVycyIsImNvbnRlbnQtdHlwZSIsImJvZHkiLCJnZXRFbGVtZW50QnlJZCIsInJ1biIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsInN1cHBvcnQiLCJzZWFyY2hQYXJhbXMiLCJpdGVyYWJsZSIsImJsb2IiLCJCbG9iIiwiZm9ybURhdGEiLCJhcnJheUJ1ZmZlciIsInZpZXdDbGFzc2VzIiwiaXNEYXRhVmlldyIsIm9iaiIsIkRhdGFWaWV3IiwiaXNQcm90b3R5cGVPZiIsImlzQXJyYXlCdWZmZXJWaWV3IiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJpbmRleE9mIiwidG9TdHJpbmciLCJIZWFkZXJzIiwiYXBwZW5kIiwibm9ybWFsaXplTmFtZSIsIm5vcm1hbGl6ZVZhbHVlIiwib2xkVmFsdWUiLCJtYXAiLCJzZXQiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwia2V5cyIsIml0ZW1zIiwiaXRlcmF0b3JGb3IiLCJ2YWx1ZXMiLCJlbnRyaWVzIiwiaXRlcmF0b3IiLCJtZXRob2RzIiwiUmVxdWVzdCIsImNsb25lIiwiX2JvZHlJbml0IiwiQm9keSIsIlJlc3BvbnNlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInVybCIsInJlc3BvbnNlIiwidHlwZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJyZWRpcmVjdCIsIlJhbmdlRXJyb3IiLCJsb2NhdGlvbiIsImlucHV0IiwiaW5pdCIsInJlcXVlc3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wdGlvbnMiLCJyYXdIZWFkZXJzIiwicmVwbGFjZSIsInNwbGl0IiwibGluZSIsInBhcnRzIiwic2hpZnQiLCJ0cmltIiwiam9pbiIsInBhcnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VUZXh0IiwiVHlwZUVycm9yIiwib250aW1lb3V0Iiwib3BlbiIsImNyZWRlbnRpYWxzIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJwb2x5ZmlsbCIsIlN0cmluZyIsInRlc3QiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25zdW1lZCIsImJvZHlVc2VkIiwiZmlsZVJlYWRlclJlYWR5IiwicmVhZGVyIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiRmlsZVJlYWRlciIsInByb21pc2UiLCJyZWFkQXNBcnJheUJ1ZmZlciIsImJ1ZmZlckNsb25lIiwiYnVmIiwic2xpY2UiLCJ2aWV3IiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJidWZmZXIiLCJfaW5pdEJvZHkiLCJfYm9keVRleHQiLCJfYm9keUJsb2IiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJfYm9keUFycmF5QnVmZmVyIiwicmVqZWN0ZWQiLCJ0aGVuIiwidGV4dCIsInJlYWRBc1RleHQiLCJyZWFkQmxvYkFzVGV4dCIsImNoYXJzIiwibGVuZ3RoIiwiZnJvbUNoYXJDb2RlIiwicmVhZEFycmF5QnVmZmVyQXNUZXh0IiwiZGVjb2RlIiwicGFyc2UiLCJ1cGNhc2VkIiwidG9VcHBlckNhc2UiLCJub3JtYWxpemVNZXRob2QiLCJyZWZlcnJlciIsImZvcm0iLCJieXRlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsImJvZHlJbml0Iiwib2siXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtB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c0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICd3aGF0d2ctZmV0Y2gnXG5cbmludGVyZmFjZSBJU3RhdHMge1xuICByZWFkb25seSBjb21wbGV0ZTogbnVtYmVyO1xuICByZWFkb25seSB0b3RhbDogbnVtYmVyO1xufVxuXG50eXBlIFByb21wdFJlc3VsdCA9IGZhbHNlIHwgUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xuXG5jb25zdCBLRVlfVE9fQ09MT1JfTUFQID0gbmV3IE1hcChbXG4gIFsgJ2InLCAnYmxhY2snIF0sXG4gIFsgJ2UnLCAnYnJvd24nIF0sXG4gIFsgJ3InLCAncmVkJyBdLFxuICBbICdvJywgJ29yYW5nZScgXSxcbiAgWyAneScsICd5ZWxsb3cnIF0sXG4gIFsgJ2cnLCAnZ3JlZW4nIF0sXG4gIFsgJ2wnLCAnYmx1ZScgXSxcbiAgWyAndicsICd2aW9sZXQnIF0sXG4gIFsgJ2EnLCAnZ3JleScgXSxcbiAgWyAndycsICd3aGl0ZScgXSxcbiAgWyAneicsICdnb2xkJyBdLFxuICBbICd4JywgJ3NpbHZlcicgXSxcbiAgWyAnICcsICdub25lJyBdLFxuXSk7XG5cbmNsYXNzIEFwcCB7XG4gIHByaXZhdGUgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgY29sb3JCYXI6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHN0YXRzOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBrZXlIYW5kbGVyOiAoKGtleTogc3RyaW5nKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMua2V5SGFuZGxlciAmJiAhdGhpcy5rZXlIYW5kbGVyKGUua2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxuICAgIC8vIFN0YXRzXG4gICAgY29uc3Qgc3RhdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gICAgc3RhdHMuY2xhc3NOYW1lID0gJ3N0YXRzJztcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRzKTtcbiAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG5cbiAgICAvLyBDb2xvcnNcbiAgICBjb25zdCBjb2xvckJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICBjb2xvckJhci5jbGFzc05hbWUgPSAnY29sb3JiYXInO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29sb3JCYXIpO1xuICAgIHRoaXMuY29sb3JCYXIgPSBjb2xvckJhcjtcblxuICAgIC8vIExlZ2VuZFxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVMZWdlbmQoKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcnVuKCkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgaW1hZ2Ugb2YgdGhpcy5pbWFnZXMoKSkge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmZldGNoU3RhdHMoKTtcblxuICAgICAgdGhpcy5zdGF0cy50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN0YXRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcm9tcHQoaW1hZ2UpO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNraXAoaW1hZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXQoaW1hZ2UsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUxlZ2VuZCgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgcmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgIHJlcy5jbGFzc05hbWUgPSAnbGVnZW5kJztcblxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ0tleSBjb2Rlcyc7XG4gICAgcmVzLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgcmVzLmFwcGVuZENoaWxkKHVsKTtcblxuICAgIGZvciAoY29uc3QgWyBrZXksIHZhbHVlIF0gb2YgS0VZX1RPX0NPTE9SX01BUCkge1xuICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gICAgICBjb25zdCBrZXlXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAga2V5V3JhcC50ZXh0Q29udGVudCA9IGBcIiR7a2V5fVwiYDtcblxuICAgICAgY29uc3QgdmFsdWVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgdmFsdWVXcmFwLnRleHRDb250ZW50ID0gYCAtICR7dmFsdWV9YDtcblxuICAgICAgbGkuYXBwZW5kQ2hpbGQoa2V5V3JhcCk7XG4gICAgICBsaS5hcHBlbmRDaGlsZCh2YWx1ZVdyYXApO1xuXG4gICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvbXB0KGhhc2g6IHN0cmluZyk6IFByb21pc2U8UHJvbXB0UmVzdWx0PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBhd2FpdCB0aGlzLmxvYWRJbWFnZShoYXNoKTtcblxuICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmltYWdlKTtcbiAgICB9XG4gICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKGltYWdlLCB0aGlzLmNvbG9yQmFyKTtcbiAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG5cbiAgICB0aGlzLmNvbG9yQmFyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgY29uc3QgY29sb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGVsZW1zOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgICBjb25zdCBhZGRDb2xvciA9IChjb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZWxlbS50ZXh0Q29udGVudCA9IGNvbG9yO1xuICAgICAgZWxlbS5jbGFzc05hbWUgPSBjb2xvcjtcblxuICAgICAgdGhpcy5jb2xvckJhci5hcHBlbmRDaGlsZChlbGVtKTtcblxuICAgICAgY29sb3JzLnB1c2goY29sb3IpO1xuICAgICAgZWxlbXMucHVzaChlbGVtKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcG9wQ29sb3IgPSAoKSA9PiB7XG4gICAgICBjb25zdCBlbGVtID0gZWxlbXMucG9wKCk7XG4gICAgICBpZiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgY29sb3JzLnBvcCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8UHJvbXB0UmVzdWx0PigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5rZXlIYW5kbGVyID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChLRVlfVE9fQ09MT1JfTUFQLmhhcyhrZXkpKSB7XG4gICAgICAgICAgYWRkQ29sb3IoS0VZX1RPX0NPTE9SX01BUC5nZXQoa2V5KSEpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0JhY2tzcGFjZScpIHtcbiAgICAgICAgICBwb3BDb2xvcigpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgIC8vIFN1Ym1pdFxuICAgICAgICAgIHRoaXMua2V5SGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXNvbHZlKGNvbG9ycyk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgIC8vIFNraXBcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmZXRjaFN0YXRzKCk6IFByb21pc2U8SVN0YXRzPiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9hcGkvc3RhdHMnKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzLmpzb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgKmltYWdlcygpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL2FwaS9uZXh0Jyk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChqc29uLmRvbmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB5aWVsZCBqc29uLmhhc2g7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkSW1hZ2UoaGFzaDogc3RyaW5nKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiB7XG4gICAgY29uc3QgaW1nID0gYXdhaXQgbmV3IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykgYXMgSFRNTEltYWdlRWxlbWVudDtcblxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgaW1hZ2UnKSk7XG5cbiAgICAgIGltZy5zcmMgPSBgL2ltYWdlcy8ke2hhc2h9LmpwZ2A7XG4gICAgfSk7XG5cbiAgICAvLyBEb3duc2NhbGVcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heChpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xuICAgIGNvbnN0IHNjYWxlID0gMjU2IC8gbWF4O1xuXG4gICAgaW1nLndpZHRoICo9IHNjYWxlO1xuICAgIGltZy5oZWlnaHQgKj0gc2NhbGU7XG5cbiAgICByZXR1cm4gaW1nO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBza2lwKGhhc2g6IHN0cmluZykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL2xhYmVsLyR7aGFzaH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7XG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdChoYXNoOiBzdHJpbmcsIGNvbG9yczogUmVhZG9ubHlBcnJheTxzdHJpbmc+KSB7XG4gICAgYXdhaXQgZmV0Y2goYC9hcGkvbGFiZWwvJHtoYXNofWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb2xvcnMgfSksXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgYXBwID0gbmV3IEFwcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpISk7XG5cbmFwcC5ydW4oKS5jYXRjaCgoZSkgPT4ge1xuICBjb25zb2xlLmVycm9yKGUpO1xufSk7XG4iLCIoZnVuY3Rpb24oc2VsZikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKHNlbGYuZmV0Y2gpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBzdXBwb3J0ID0ge1xuICAgIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gc2VsZixcbiAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcbiAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfVxuXG4gIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyKSB7XG4gICAgdmFyIHZpZXdDbGFzc2VzID0gW1xuICAgICAgJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nXG4gICAgXVxuXG4gICAgdmFyIGlzRGF0YVZpZXcgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob2JqKVxuICAgIH1cblxuICAgIHZhciBpc0FycmF5QnVmZmVyVmlldyA9IEFycmF5QnVmZmVyLmlzVmlldyB8fCBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG4gICAgfVxuICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcbiAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9XG5cbiAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKVxuICAgICAgfSwgdGhpcylcbiAgICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcbiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgICAgfSwgdGhpcylcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXVxuICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSsnLCcrdmFsdWUgOiB2YWx1ZVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHRoaXMuaGFzKG5hbWUpID8gdGhpcy5tYXBbbmFtZV0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChuYW1lKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW1zLnB1c2godmFsdWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICAgIH1cbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpXG4gICAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGFyc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodmlld1tpXSlcbiAgICB9XG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG4gIH1cblxuICBmdW5jdGlvbiBidWZmZXJDbG9uZShidWYpIHtcbiAgICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgICByZXR1cm4gYnVmLnNsaWNlKDApXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpXG4gICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWYpKVxuICAgICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gQm9keSgpIHtcbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgc3VwcG9ydC5ibG9iICYmIGlzRGF0YVZpZXcoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keS5idWZmZXIpXG4gICAgICAgIC8vIElFIDEwLTExIGNhbid0IGhhbmRsZSBhIERhdGFWaWV3IGJvZHkuXG4gICAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnN1bWVkKHRoaXMpIHx8IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZWFkQXJyYXlCdWZmZXJBc1RleHQodGhpcy5fYm9keUFycmF5QnVmZmVyKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gU3RyaW5nKGlucHV0KVxuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG4gICAgfVxuICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7IGJvZHk6IHRoaXMuX2JvZHlJbml0IH0pXG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcbiAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgIGlmIChieXRlcykge1xuICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gICAgLy8gUmVwbGFjZSBpbnN0YW5jZXMgb2YgXFxyXFxuIGFuZCBcXG4gZm9sbG93ZWQgYnkgYXQgbGVhc3Qgb25lIHNwYWNlIG9yIGhvcml6b250YWwgdGFiIHdpdGggYSBzcGFjZVxuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4yXG4gICAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJylcbiAgICBwcmVQcm9jZXNzZWRIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKVxuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gaGVhZGVyc1xuICB9XG5cbiAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzID09PSB1bmRlZmluZWQgPyAyMDAgOiBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSydcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICB9XG5cbiAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuICB9XG5cbiAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXG4gIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnb21pdCcpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgIH0pXG4gIH1cbiAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=